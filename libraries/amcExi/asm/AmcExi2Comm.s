.include "macros.inc"

.section .text, "ax"  # 0x800065A0 - 0x8010F860

.global EXI2_CallBack
EXI2_CallBack:
/* 8010E728 0010A648  7C 08 02 A6 */	mflr r0
/* 8010E72C 0010A64C  90 01 00 04 */	stw r0, 4(r1)
/* 8010E730 0010A650  38 00 00 01 */	li r0, 1
/* 8010E734 0010A654  94 21 FF F8 */	stwu r1, -8(r1)
/* 8010E738 0010A658  80 6D 98 F0 */	lwz r3, pucEXI2InputPending@sda21(r13)
/* 8010E73C 0010A65C  98 03 00 00 */	stb r0, 0(r3)
/* 8010E740 0010A660  81 8D A5 F8 */	lwz r12, TRK_Callback@sda21(r13)
/* 8010E744 0010A664  28 0C 00 00 */	cmplwi r12, 0
/* 8010E748 0010A668  41 82 00 10 */	beq lbl_8010E758
/* 8010E74C 0010A66C  7D 88 03 A6 */	mtlr r12
/* 8010E750 0010A670  38 60 00 00 */	li r3, 0
/* 8010E754 0010A674  4E 80 00 21 */	blrl
lbl_8010E758:
/* 8010E758 0010A678  80 01 00 0C */	lwz r0, 0xc(r1)
/* 8010E75C 0010A67C  38 21 00 08 */	addi r1, r1, 8
/* 8010E760 0010A680  7C 08 03 A6 */	mtlr r0
/* 8010E764 0010A684  4E 80 00 20 */	blr

.global EXI2_Init
EXI2_Init:
/* 8010E768 0010A688  7C 08 02 A6 */	mflr r0
/* 8010E76C 0010A68C  90 01 00 04 */	stw r0, 4(r1)
/* 8010E770 0010A690  94 21 FF D0 */	stwu r1, -0x30(r1)
/* 8010E774 0010A694  93 E1 00 2C */	stw r31, 0x2c(r1)
/* 8010E778 0010A698  7C 9F 23 78 */	mr r31, r4
/* 8010E77C 0010A69C  80 0D 98 F0 */	lwz r0, pucEXI2InputPending@sda21(r13)
/* 8010E780 0010A6A0  90 03 00 00 */	stw r0, 0(r3)
/* 8010E784 0010A6A4  4B FB 79 39 */	bl OSDisableInterrupts
/* 8010E788 0010A6A8  93 ED A5 F8 */	stw r31, TRK_Callback@sda21(r13)
/* 8010E78C 0010A6AC  4B FB 79 59 */	bl OSRestoreInterrupts
/* 8010E790 0010A6B0  4B FF FF 59 */	bl AmcEXIInit
/* 8010E794 0010A6B4  3C 80 01 00 */	lis r4, 0x01000003@ha
/* 8010E798 0010A6B8  38 60 00 00 */	li r3, 0
/* 8010E79C 0010A6BC  38 04 00 03 */	addi r0, r4, 0x01000003@l
/* 8010E7A0 0010A6C0  90 61 00 20 */	stw r3, 0x20(r1)
/* 8010E7A4 0010A6C4  90 01 00 1C */	stw r0, 0x1c(r1)
/* 8010E7A8 0010A6C8  48 00 00 0C */	b lbl_8010E7B4
lbl_8010E7AC:
/* 8010E7AC 0010A6CC  38 60 00 05 */	li r3, 5
/* 8010E7B0 0010A6D0  4B FF FD C1 */	bl AmcEXISelect
lbl_8010E7B4:
/* 8010E7B4 0010A6D4  2C 03 00 00 */	cmpwi r3, 0
/* 8010E7B8 0010A6D8  41 82 FF F4 */	beq lbl_8010E7AC
/* 8010E7BC 0010A6DC  3C 00 80 00 */	lis r0, 0x8000
/* 8010E7C0 0010A6E0  90 01 00 10 */	stw r0, 0x10(r1)
/* 8010E7C4 0010A6E4  38 61 00 10 */	addi r3, r1, 0x10
/* 8010E7C8 0010A6E8  38 80 00 02 */	li r4, 2
/* 8010E7CC 0010A6EC  38 A0 00 01 */	li r5, 1
/* 8010E7D0 0010A6F0  38 C0 00 00 */	li r6, 0
/* 8010E7D4 0010A6F4  4B FF F9 15 */	bl AmcEXIImm
/* 8010E7D8 0010A6F8  4B FF FB 55 */	bl AmcEXISync
/* 8010E7DC 0010A6FC  38 61 00 1C */	addi r3, r1, 0x1c
/* 8010E7E0 0010A700  38 80 00 04 */	li r4, 4
/* 8010E7E4 0010A704  38 A0 00 01 */	li r5, 1
/* 8010E7E8 0010A708  38 C0 00 00 */	li r6, 0
/* 8010E7EC 0010A70C  4B FF F8 FD */	bl AmcEXIImm
/* 8010E7F0 0010A710  4B FF FB 3D */	bl AmcEXISync
/* 8010E7F4 0010A714  38 61 00 20 */	addi r3, r1, 0x20
/* 8010E7F8 0010A718  38 80 00 04 */	li r4, 4
/* 8010E7FC 0010A71C  38 A0 00 01 */	li r5, 1
/* 8010E800 0010A720  38 C0 00 00 */	li r6, 0
/* 8010E804 0010A724  4B FF F8 E5 */	bl AmcEXIImm
/* 8010E808 0010A728  4B FF FB 25 */	bl AmcEXISync
/* 8010E80C 0010A72C  4B FF FD E5 */	bl AmcEXIDeselect
/* 8010E810 0010A730  80 01 00 34 */	lwz r0, 0x34(r1)
/* 8010E814 0010A734  83 E1 00 2C */	lwz r31, 0x2c(r1)
/* 8010E818 0010A738  38 21 00 30 */	addi r1, r1, 0x30
/* 8010E81C 0010A73C  7C 08 03 A6 */	mtlr r0
/* 8010E820 0010A740  4E 80 00 20 */	blr

.global EXI2_EnableInterrupts
EXI2_EnableInterrupts:
/* 8010E824 0010A744  7C 08 02 A6 */	mflr r0
/* 8010E828 0010A748  3C 60 80 11 */	lis r3, EXI2_CallBack@ha
/* 8010E82C 0010A74C  90 01 00 04 */	stw r0, 4(r1)
/* 8010E830 0010A750  38 63 E7 28 */	addi r3, r3, EXI2_CallBack@l
/* 8010E834 0010A754  94 21 FF F8 */	stwu r1, -8(r1)
/* 8010E838 0010A758  4B FF FC CD */	bl AmcEXISetExiCallback
/* 8010E83C 0010A75C  4B FF FE 6D */	bl AmcEXIEnableInterrupts
/* 8010E840 0010A760  80 01 00 0C */	lwz r0, 0xc(r1)
/* 8010E844 0010A764  38 21 00 08 */	addi r1, r1, 8
/* 8010E848 0010A768  7C 08 03 A6 */	mtlr r0
/* 8010E84C 0010A76C  4E 80 00 20 */	blr

.global EXI2_Poll
EXI2_Poll:
/* 8010E850 0010A770  7C 08 02 A6 */	mflr r0
/* 8010E854 0010A774  3C 60 CC 00 */	lis r3, 0xCC003000@ha
/* 8010E858 0010A778  90 01 00 04 */	stw r0, 4(r1)
/* 8010E85C 0010A77C  80 03 30 00 */	lwz r0, 0xCC003000@l(r3)
/* 8010E860 0010A780  94 21 FF E0 */	stwu r1, -0x20(r1)
/* 8010E864 0010A784  54 00 04 E7 */	rlwinm. r0, r0, 0, 0x13, 0x13
/* 8010E868 0010A788  40 82 00 20 */	bne lbl_8010E888
/* 8010E86C 0010A78C  80 6D 98 F0 */	lwz r3, pucEXI2InputPending@sda21(r13)
/* 8010E870 0010A790  88 03 00 00 */	lbz r0, 0(r3)
/* 8010E874 0010A794  28 00 00 00 */	cmplwi r0, 0
/* 8010E878 0010A798  40 82 00 10 */	bne lbl_8010E888
/* 8010E87C 0010A79C  38 00 00 00 */	li r0, 0
/* 8010E880 0010A7A0  90 01 00 18 */	stw r0, 0x18(r1)
/* 8010E884 0010A7A4  48 00 00 C0 */	b lbl_8010E944
lbl_8010E888:
/* 8010E888 0010A7A8  80 0D A5 F4 */	lwz r0, fExi2Selected@sda21(r13)
/* 8010E88C 0010A7AC  2C 00 00 00 */	cmpwi r0, 0
/* 8010E890 0010A7B0  40 82 00 74 */	bne lbl_8010E904
/* 8010E894 0010A7B4  38 60 00 00 */	li r3, 0
/* 8010E898 0010A7B8  48 00 00 0C */	b lbl_8010E8A4
lbl_8010E89C:
/* 8010E89C 0010A7BC  38 60 00 05 */	li r3, 5
/* 8010E8A0 0010A7C0  4B FF FC D1 */	bl AmcEXISelect
lbl_8010E8A4:
/* 8010E8A4 0010A7C4  2C 03 00 00 */	cmpwi r3, 0
/* 8010E8A8 0010A7C8  41 82 FF F4 */	beq lbl_8010E89C
/* 8010E8AC 0010A7CC  40 82 00 18 */	bne lbl_8010E8C4
/* 8010E8B0 0010A7D0  3C 60 80 1F */	lis r3, lbl_801ED8F8@ha
/* 8010E8B4 0010A7D4  4C C6 31 82 */	crclr 6
/* 8010E8B8 0010A7D8  38 63 D8 F8 */	addi r3, r3, lbl_801ED8F8@l
/* 8010E8BC 0010A7DC  4B FF 65 31 */	bl printf
/* 8010E8C0 0010A7E0  48 00 00 44 */	b lbl_8010E904
lbl_8010E8C4:
/* 8010E8C4 0010A7E4  38 60 00 01 */	li r3, 1
/* 8010E8C8 0010A7E8  38 00 00 00 */	li r0, 0
/* 8010E8CC 0010A7EC  90 6D A5 F4 */	stw r3, fExi2Selected@sda21(r13)
/* 8010E8D0 0010A7F0  38 61 00 08 */	addi r3, r1, 8
/* 8010E8D4 0010A7F4  90 01 00 08 */	stw r0, 8(r1)
/* 8010E8D8 0010A7F8  38 80 00 02 */	li r4, 2
/* 8010E8DC 0010A7FC  38 A0 00 01 */	li r5, 1
/* 8010E8E0 0010A800  38 C0 00 00 */	li r6, 0
/* 8010E8E4 0010A804  4B FF F8 05 */	bl AmcEXIImm
/* 8010E8E8 0010A808  4B FF FA 45 */	bl AmcEXISync
/* 8010E8EC 0010A80C  38 61 00 14 */	addi r3, r1, 0x14
/* 8010E8F0 0010A810  38 80 00 02 */	li r4, 2
/* 8010E8F4 0010A814  38 A0 00 00 */	li r5, 0
/* 8010E8F8 0010A818  38 C0 00 00 */	li r6, 0
/* 8010E8FC 0010A81C  4B FF F7 ED */	bl AmcEXIImm
/* 8010E900 0010A820  4B FF FA 2D */	bl AmcEXISync
lbl_8010E904:
/* 8010E904 0010A824  38 61 00 18 */	addi r3, r1, 0x18
/* 8010E908 0010A828  38 80 00 04 */	li r4, 4
/* 8010E90C 0010A82C  38 A0 00 00 */	li r5, 0
/* 8010E910 0010A830  38 C0 00 00 */	li r6, 0
/* 8010E914 0010A834  4B FF F7 D5 */	bl AmcEXIImm
/* 8010E918 0010A838  4B FF FA 15 */	bl AmcEXISync
/* 8010E91C 0010A83C  80 AD 98 F0 */	lwz r5, pucEXI2InputPending@sda21(r13)
/* 8010E920 0010A840  88 05 00 00 */	lbz r0, 0(r5)
/* 8010E924 0010A844  28 00 00 00 */	cmplwi r0, 0
/* 8010E928 0010A848  40 82 00 1C */	bne lbl_8010E944
/* 8010E92C 0010A84C  3C 80 CC 00 */	lis r4, 0xCC003000@ha
/* 8010E930 0010A850  80 64 30 00 */	lwz r3, 0xCC003000@l(r4)
/* 8010E934 0010A854  38 00 00 01 */	li r0, 1
/* 8010E938 0010A858  98 05 00 00 */	stb r0, 0(r5)
/* 8010E93C 0010A85C  54 60 04 E6 */	rlwinm r0, r3, 0, 0x13, 0x13
/* 8010E940 0010A860  90 04 30 00 */	stw r0, 0x3000(r4)
lbl_8010E944:
/* 8010E944 0010A864  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8010E948 0010A868  80 61 00 18 */	lwz r3, 0x18(r1)
/* 8010E94C 0010A86C  38 21 00 20 */	addi r1, r1, 0x20
/* 8010E950 0010A870  7C 08 03 A6 */	mtlr r0
/* 8010E954 0010A874  4E 80 00 20 */	blr

.global EXI2_ReadN
EXI2_ReadN:
/* 8010E958 0010A878  7C 08 02 A6 */	mflr r0
/* 8010E95C 0010A87C  90 01 00 04 */	stw r0, 4(r1)
/* 8010E960 0010A880  94 21 FF B8 */	stwu r1, -0x48(r1)
/* 8010E964 0010A884  BF 21 00 2C */	stmw r25, 0x2c(r1)
/* 8010E968 0010A888  3B 23 00 00 */	addi r25, r3, 0
/* 8010E96C 0010A88C  3B 44 00 00 */	addi r26, r4, 0
/* 8010E970 0010A890  80 0D A5 F4 */	lwz r0, fExi2Selected@sda21(r13)
/* 8010E974 0010A894  2C 00 00 00 */	cmpwi r0, 0
/* 8010E978 0010A898  41 82 00 0C */	beq lbl_8010E984
/* 8010E97C 0010A89C  3B 60 00 01 */	li r27, 1
/* 8010E980 0010A8A0  48 00 00 7C */	b lbl_8010E9FC
lbl_8010E984:
/* 8010E984 0010A8A4  38 60 00 00 */	li r3, 0
/* 8010E988 0010A8A8  48 00 00 0C */	b lbl_8010E994
lbl_8010E98C:
/* 8010E98C 0010A8AC  38 60 00 05 */	li r3, 5
/* 8010E990 0010A8B0  4B FF FB E1 */	bl AmcEXISelect
lbl_8010E994:
/* 8010E994 0010A8B4  2C 03 00 00 */	cmpwi r3, 0
/* 8010E998 0010A8B8  41 82 FF F4 */	beq lbl_8010E98C
/* 8010E99C 0010A8BC  7C 7B 1B 78 */	mr r27, r3
/* 8010E9A0 0010A8C0  40 82 00 1C */	bne lbl_8010E9BC
/* 8010E9A4 0010A8C4  3C 60 80 1F */	lis r3, lbl_801ED8F8@ha
/* 8010E9A8 0010A8C8  4C C6 31 82 */	crclr 6
/* 8010E9AC 0010A8CC  38 63 D8 F8 */	addi r3, r3, lbl_801ED8F8@l
/* 8010E9B0 0010A8D0  4B FF 64 3D */	bl printf
/* 8010E9B4 0010A8D4  3B 60 00 00 */	li r27, 0
/* 8010E9B8 0010A8D8  48 00 00 44 */	b lbl_8010E9FC
lbl_8010E9BC:
/* 8010E9BC 0010A8DC  38 60 00 01 */	li r3, 1
/* 8010E9C0 0010A8E0  38 00 00 00 */	li r0, 0
/* 8010E9C4 0010A8E4  90 6D A5 F4 */	stw r3, fExi2Selected@sda21(r13)
/* 8010E9C8 0010A8E8  38 61 00 14 */	addi r3, r1, 0x14
/* 8010E9CC 0010A8EC  90 01 00 14 */	stw r0, 0x14(r1)
/* 8010E9D0 0010A8F0  38 80 00 02 */	li r4, 2
/* 8010E9D4 0010A8F4  38 A0 00 01 */	li r5, 1
/* 8010E9D8 0010A8F8  38 C0 00 00 */	li r6, 0
/* 8010E9DC 0010A8FC  4B FF F7 0D */	bl AmcEXIImm
/* 8010E9E0 0010A900  4B FF F9 4D */	bl AmcEXISync
/* 8010E9E4 0010A904  38 61 00 1C */	addi r3, r1, 0x1c
/* 8010E9E8 0010A908  38 80 00 02 */	li r4, 2
/* 8010E9EC 0010A90C  38 A0 00 00 */	li r5, 0
/* 8010E9F0 0010A910  38 C0 00 00 */	li r6, 0
/* 8010E9F4 0010A914  4B FF F6 F5 */	bl AmcEXIImm
/* 8010E9F8 0010A918  4B FF F9 35 */	bl AmcEXISync
lbl_8010E9FC:
/* 8010E9FC 0010A91C  2C 1B 00 00 */	cmpwi r27, 0
/* 8010EA00 0010A920  40 82 00 0C */	bne lbl_8010EA0C
/* 8010EA04 0010A924  38 60 00 01 */	li r3, 1
/* 8010EA08 0010A928  48 00 01 F8 */	b lbl_8010EC00
lbl_8010EA0C:
/* 8010EA0C 0010A92C  57 44 07 BF */	clrlwi. r4, r26, 0x1e
/* 8010EA10 0010A930  41 82 00 0C */	beq lbl_8010EA1C
/* 8010EA14 0010A934  38 60 00 01 */	li r3, 1
/* 8010EA18 0010A938  48 00 00 08 */	b lbl_8010EA20
lbl_8010EA1C:
/* 8010EA1C 0010A93C  38 60 00 00 */	li r3, 0
lbl_8010EA20:
/* 8010EA20 0010A940  7F 5C 16 70 */	srawi r28, r26, 2
/* 8010EA24 0010A944  57 40 F0 BE */	srwi r0, r26, 2
/* 8010EA28 0010A948  7F 9C 01 94 */	addze r28, r28
/* 8010EA2C 0010A94C  7C 60 1A 14 */	add r3, r0, r3
/* 8010EA30 0010A950  57 40 07 FE */	clrlwi r0, r26, 0x1f
/* 8010EA34 0010A954  57 9C 10 3A */	slwi r28, r28, 2
/* 8010EA38 0010A958  7F A4 02 14 */	add r29, r4, r0
/* 8010EA3C 0010A95C  7F 9C D0 10 */	subfc r28, r28, r26
/* 8010EA40 0010A960  3B E3 FF FF */	addi r31, r3, -1
/* 8010EA44 0010A964  3B 60 00 00 */	li r27, 0
/* 8010EA48 0010A968  3B C0 00 00 */	li r30, 0
/* 8010EA4C 0010A96C  48 00 01 84 */	b lbl_8010EBD0
lbl_8010EA50:
/* 8010EA50 0010A970  7C 1E F8 40 */	cmplw r30, r31
/* 8010EA54 0010A974  40 80 00 0C */	bge lbl_8010EA60
/* 8010EA58 0010A978  38 80 00 04 */	li r4, 4
/* 8010EA5C 0010A97C  48 00 00 18 */	b lbl_8010EA74
lbl_8010EA60:
/* 8010EA60 0010A980  28 1D 00 02 */	cmplwi r29, 2
/* 8010EA64 0010A984  40 82 00 0C */	bne lbl_8010EA70
/* 8010EA68 0010A988  38 80 00 02 */	li r4, 2
/* 8010EA6C 0010A98C  48 00 00 08 */	b lbl_8010EA74
lbl_8010EA70:
/* 8010EA70 0010A990  38 80 00 04 */	li r4, 4
lbl_8010EA74:
/* 8010EA74 0010A994  38 61 00 20 */	addi r3, r1, 0x20
/* 8010EA78 0010A998  38 A0 00 00 */	li r5, 0
/* 8010EA7C 0010A99C  38 C0 00 00 */	li r6, 0
/* 8010EA80 0010A9A0  4B FF F6 69 */	bl AmcEXIImm
/* 8010EA84 0010A9A4  4B FF F8 A9 */	bl AmcEXISync
/* 8010EA88 0010A9A8  7C 1B D0 50 */	subf r0, r27, r26
/* 8010EA8C 0010A9AC  28 00 00 04 */	cmplwi r0, 4
/* 8010EA90 0010A9B0  41 80 00 0C */	blt lbl_8010EA9C
/* 8010EA94 0010A9B4  38 A0 00 04 */	li r5, 4
/* 8010EA98 0010A9B8  48 00 00 08 */	b lbl_8010EAA0
lbl_8010EA9C:
/* 8010EA9C 0010A9BC  7F 85 E3 78 */	mr r5, r28
lbl_8010EAA0:
/* 8010EAA0 0010A9C0  2C 05 00 00 */	cmpwi r5, 0
/* 8010EAA4 0010A9C4  38 80 00 00 */	li r4, 0
/* 8010EAA8 0010A9C8  40 81 01 20 */	ble lbl_8010EBC8
/* 8010EAAC 0010A9CC  2C 05 00 08 */	cmpwi r5, 8
/* 8010EAB0 0010A9D0  38 65 FF F8 */	addi r3, r5, -8
/* 8010EAB4 0010A9D4  40 81 01 40 */	ble lbl_8010EBF4
/* 8010EAB8 0010A9D8  38 03 00 07 */	addi r0, r3, 7
/* 8010EABC 0010A9DC  54 00 E8 FE */	srwi r0, r0, 3
/* 8010EAC0 0010A9E0  2C 03 00 00 */	cmpwi r3, 0
/* 8010EAC4 0010A9E4  7C 09 03 A6 */	mtctr r0
/* 8010EAC8 0010A9E8  7C 79 DA 14 */	add r3, r25, r27
/* 8010EACC 0010A9EC  40 81 01 28 */	ble lbl_8010EBF4
lbl_8010EAD0:
/* 8010EAD0 0010A9F0  20 04 00 03 */	subfic r0, r4, 3
/* 8010EAD4 0010A9F4  80 C1 00 20 */	lwz r6, 0x20(r1)
/* 8010EAD8 0010A9F8  54 00 18 38 */	slwi r0, r0, 3
/* 8010EADC 0010A9FC  7C C0 04 30 */	srw r0, r6, r0
/* 8010EAE0 0010AA00  98 03 00 00 */	stb r0, 0(r3)
/* 8010EAE4 0010AA04  38 04 00 01 */	addi r0, r4, 1
/* 8010EAE8 0010AA08  20 00 00 03 */	subfic r0, r0, 3
/* 8010EAEC 0010AA0C  80 E1 00 20 */	lwz r7, 0x20(r1)
/* 8010EAF0 0010AA10  54 06 18 38 */	slwi r6, r0, 3
/* 8010EAF4 0010AA14  38 04 00 02 */	addi r0, r4, 2
/* 8010EAF8 0010AA18  7C E6 34 30 */	srw r6, r7, r6
/* 8010EAFC 0010AA1C  98 C3 00 01 */	stb r6, 1(r3)
/* 8010EB00 0010AA20  20 00 00 03 */	subfic r0, r0, 3
/* 8010EB04 0010AA24  54 07 18 38 */	slwi r7, r0, 3
/* 8010EB08 0010AA28  81 01 00 20 */	lwz r8, 0x20(r1)
/* 8010EB0C 0010AA2C  7C C4 00 D0 */	neg r6, r4
/* 8010EB10 0010AA30  38 04 00 04 */	addi r0, r4, 4
/* 8010EB14 0010AA34  7D 07 3C 30 */	srw r7, r8, r7
/* 8010EB18 0010AA38  98 E3 00 02 */	stb r7, 2(r3)
/* 8010EB1C 0010AA3C  21 00 00 03 */	subfic r8, r0, 3
/* 8010EB20 0010AA40  38 04 00 05 */	addi r0, r4, 5
/* 8010EB24 0010AA44  81 21 00 20 */	lwz r9, 0x20(r1)
/* 8010EB28 0010AA48  20 E0 00 03 */	subfic r7, r0, 3
/* 8010EB2C 0010AA4C  54 C6 18 38 */	slwi r6, r6, 3
/* 8010EB30 0010AA50  7D 20 34 30 */	srw r0, r9, r6
/* 8010EB34 0010AA54  98 03 00 03 */	stb r0, 3(r3)
/* 8010EB38 0010AA58  38 04 00 06 */	addi r0, r4, 6
/* 8010EB3C 0010AA5C  20 C0 00 03 */	subfic r6, r0, 3
/* 8010EB40 0010AA60  81 21 00 20 */	lwz r9, 0x20(r1)
/* 8010EB44 0010AA64  38 04 00 07 */	addi r0, r4, 7
/* 8010EB48 0010AA68  55 08 18 38 */	slwi r8, r8, 3
/* 8010EB4C 0010AA6C  7D 28 44 30 */	srw r8, r9, r8
/* 8010EB50 0010AA70  99 03 00 04 */	stb r8, 4(r3)
/* 8010EB54 0010AA74  20 00 00 03 */	subfic r0, r0, 3
/* 8010EB58 0010AA78  54 E7 18 38 */	slwi r7, r7, 3
/* 8010EB5C 0010AA7C  81 01 00 20 */	lwz r8, 0x20(r1)
/* 8010EB60 0010AA80  54 C6 18 38 */	slwi r6, r6, 3
/* 8010EB64 0010AA84  54 00 18 38 */	slwi r0, r0, 3
/* 8010EB68 0010AA88  7D 07 3C 30 */	srw r7, r8, r7
/* 8010EB6C 0010AA8C  98 E3 00 05 */	stb r7, 5(r3)
/* 8010EB70 0010AA90  38 84 00 08 */	addi r4, r4, 8
/* 8010EB74 0010AA94  80 E1 00 20 */	lwz r7, 0x20(r1)
/* 8010EB78 0010AA98  7C E6 34 30 */	srw r6, r7, r6
/* 8010EB7C 0010AA9C  98 C3 00 06 */	stb r6, 6(r3)
/* 8010EB80 0010AAA0  80 C1 00 20 */	lwz r6, 0x20(r1)
/* 8010EB84 0010AAA4  7C C0 04 30 */	srw r0, r6, r0
/* 8010EB88 0010AAA8  98 03 00 07 */	stb r0, 7(r3)
/* 8010EB8C 0010AAAC  38 63 00 08 */	addi r3, r3, 8
/* 8010EB90 0010AAB0  42 00 FF 40 */	bdnz lbl_8010EAD0
/* 8010EB94 0010AAB4  48 00 00 60 */	b lbl_8010EBF4
lbl_8010EB98:
/* 8010EB98 0010AAB8  7C 04 28 50 */	subf r0, r4, r5
/* 8010EB9C 0010AABC  7C 04 28 00 */	cmpw r4, r5
/* 8010EBA0 0010AAC0  7C 09 03 A6 */	mtctr r0
/* 8010EBA4 0010AAC4  40 80 00 24 */	bge lbl_8010EBC8
lbl_8010EBA8:
/* 8010EBA8 0010AAC8  20 04 00 03 */	subfic r0, r4, 3
/* 8010EBAC 0010AACC  80 61 00 20 */	lwz r3, 0x20(r1)
/* 8010EBB0 0010AAD0  54 00 18 38 */	slwi r0, r0, 3
/* 8010EBB4 0010AAD4  7C 60 04 30 */	srw r0, r3, r0
/* 8010EBB8 0010AAD8  98 06 00 00 */	stb r0, 0(r6)
/* 8010EBBC 0010AADC  38 C6 00 01 */	addi r6, r6, 1
/* 8010EBC0 0010AAE0  38 84 00 01 */	addi r4, r4, 1
/* 8010EBC4 0010AAE4  42 00 FF E4 */	bdnz lbl_8010EBA8
lbl_8010EBC8:
/* 8010EBC8 0010AAE8  3B DE 00 01 */	addi r30, r30, 1
/* 8010EBCC 0010AAEC  3B 7B 00 04 */	addi r27, r27, 4
lbl_8010EBD0:
/* 8010EBD0 0010AAF0  7C 1B D0 40 */	cmplw r27, r26
/* 8010EBD4 0010AAF4  41 80 FE 7C */	blt lbl_8010EA50
/* 8010EBD8 0010AAF8  4B FF FA 19 */	bl AmcEXIDeselect
/* 8010EBDC 0010AAFC  38 00 00 00 */	li r0, 0
/* 8010EBE0 0010AB00  80 8D 98 F0 */	lwz r4, pucEXI2InputPending@sda21(r13)
/* 8010EBE4 0010AB04  90 0D A5 F4 */	stw r0, fExi2Selected@sda21(r13)
/* 8010EBE8 0010AB08  38 60 00 00 */	li r3, 0
/* 8010EBEC 0010AB0C  98 04 00 00 */	stb r0, 0(r4)
/* 8010EBF0 0010AB10  48 00 00 10 */	b lbl_8010EC00
lbl_8010EBF4:
/* 8010EBF4 0010AB14  7C DB 22 14 */	add r6, r27, r4
/* 8010EBF8 0010AB18  7C D9 32 14 */	add r6, r25, r6
/* 8010EBFC 0010AB1C  4B FF FF 9C */	b lbl_8010EB98
lbl_8010EC00:
/* 8010EC00 0010AB20  BB 21 00 2C */	lmw r25, 0x2c(r1)
/* 8010EC04 0010AB24  80 01 00 4C */	lwz r0, 0x4c(r1)
/* 8010EC08 0010AB28  38 21 00 48 */	addi r1, r1, 0x48
/* 8010EC0C 0010AB2C  7C 08 03 A6 */	mtlr r0
/* 8010EC10 0010AB30  4E 80 00 20 */	blr

.global EXI2_WriteN
EXI2_WriteN:
/* 8010EC14 0010AB34  7C 08 02 A6 */	mflr r0
/* 8010EC18 0010AB38  90 01 00 04 */	stw r0, 4(r1)
/* 8010EC1C 0010AB3C  94 21 FF C0 */	stwu r1, -0x40(r1)
/* 8010EC20 0010AB40  93 E1 00 3C */	stw r31, 0x3c(r1)
/* 8010EC24 0010AB44  93 C1 00 38 */	stw r30, 0x38(r1)
/* 8010EC28 0010AB48  93 A1 00 34 */	stw r29, 0x34(r1)
/* 8010EC2C 0010AB4C  3B A3 00 00 */	addi r29, r3, 0
/* 8010EC30 0010AB50  38 60 00 00 */	li r3, 0
/* 8010EC34 0010AB54  93 81 00 30 */	stw r28, 0x30(r1)
/* 8010EC38 0010AB58  90 81 00 28 */	stw r4, 0x28(r1)
/* 8010EC3C 0010AB5C  48 00 00 0C */	b lbl_8010EC48
lbl_8010EC40:
/* 8010EC40 0010AB60  38 60 00 05 */	li r3, 5
/* 8010EC44 0010AB64  4B FF F9 2D */	bl AmcEXISelect
lbl_8010EC48:
/* 8010EC48 0010AB68  2C 03 00 00 */	cmpwi r3, 0
/* 8010EC4C 0010AB6C  41 82 FF F4 */	beq lbl_8010EC40
/* 8010EC50 0010AB70  40 82 00 0C */	bne lbl_8010EC5C
/* 8010EC54 0010AB74  38 60 00 01 */	li r3, 1
/* 8010EC58 0010AB78  48 00 01 4C */	b lbl_8010EDA4
lbl_8010EC5C:
/* 8010EC5C 0010AB7C  3C 00 80 00 */	lis r0, 0x8000
/* 8010EC60 0010AB80  90 01 00 18 */	stw r0, 0x18(r1)
/* 8010EC64 0010AB84  38 61 00 18 */	addi r3, r1, 0x18
/* 8010EC68 0010AB88  38 80 00 02 */	li r4, 2
/* 8010EC6C 0010AB8C  38 A0 00 01 */	li r5, 1
/* 8010EC70 0010AB90  38 C0 00 00 */	li r6, 0
/* 8010EC74 0010AB94  4B FF F4 75 */	bl AmcEXIImm
/* 8010EC78 0010AB98  4B FF F6 B5 */	bl AmcEXISync
/* 8010EC7C 0010AB9C  38 61 00 28 */	addi r3, r1, 0x28
/* 8010EC80 0010ABA0  38 80 00 04 */	li r4, 4
/* 8010EC84 0010ABA4  38 A0 00 01 */	li r5, 1
/* 8010EC88 0010ABA8  38 C0 00 00 */	li r6, 0
/* 8010EC8C 0010ABAC  4B FF F4 5D */	bl AmcEXIImm
/* 8010EC90 0010ABB0  4B FF F6 9D */	bl AmcEXISync
/* 8010EC94 0010ABB4  80 81 00 28 */	lwz r4, 0x28(r1)
/* 8010EC98 0010ABB8  54 80 07 BF */	clrlwi. r0, r4, 0x1e
/* 8010EC9C 0010ABBC  41 82 00 0C */	beq lbl_8010ECA8
/* 8010ECA0 0010ABC0  38 60 00 01 */	li r3, 1
/* 8010ECA4 0010ABC4  48 00 00 08 */	b lbl_8010ECAC
lbl_8010ECA8:
/* 8010ECA8 0010ABC8  38 60 00 00 */	li r3, 0
lbl_8010ECAC:
/* 8010ECAC 0010ABCC  54 80 F0 BE */	srwi r0, r4, 2
/* 8010ECB0 0010ABD0  7F 80 1A 14 */	add r28, r0, r3
/* 8010ECB4 0010ABD4  3B FC FF FF */	addi r31, r28, -1
/* 8010ECB8 0010ABD8  3B C0 00 00 */	li r30, 0
/* 8010ECBC 0010ABDC  48 00 00 54 */	b lbl_8010ED10
lbl_8010ECC0:
/* 8010ECC0 0010ABE0  7C 1E F8 40 */	cmplw r30, r31
/* 8010ECC4 0010ABE4  40 80 00 0C */	bge lbl_8010ECD0
/* 8010ECC8 0010ABE8  38 80 00 04 */	li r4, 4
/* 8010ECCC 0010ABEC  48 00 00 28 */	b lbl_8010ECF4
lbl_8010ECD0:
/* 8010ECD0 0010ABF0  80 01 00 28 */	lwz r0, 0x28(r1)
/* 8010ECD4 0010ABF4  54 03 07 BE */	clrlwi r3, r0, 0x1e
/* 8010ECD8 0010ABF8  54 00 07 FE */	clrlwi r0, r0, 0x1f
/* 8010ECDC 0010ABFC  7C 03 02 14 */	add r0, r3, r0
/* 8010ECE0 0010AC00  28 00 00 02 */	cmplwi r0, 2
/* 8010ECE4 0010AC04  40 82 00 0C */	bne lbl_8010ECF0
/* 8010ECE8 0010AC08  38 80 00 02 */	li r4, 2
/* 8010ECEC 0010AC0C  48 00 00 08 */	b lbl_8010ECF4
lbl_8010ECF0:
/* 8010ECF0 0010AC10  38 80 00 04 */	li r4, 4
lbl_8010ECF4:
/* 8010ECF4 0010AC14  38 7D 00 00 */	addi r3, r29, 0
/* 8010ECF8 0010AC18  38 A0 00 01 */	li r5, 1
/* 8010ECFC 0010AC1C  38 C0 00 00 */	li r6, 0
/* 8010ED00 0010AC20  3B BD 00 04 */	addi r29, r29, 4
/* 8010ED04 0010AC24  4B FF F3 E5 */	bl AmcEXIImm
/* 8010ED08 0010AC28  4B FF F6 25 */	bl AmcEXISync
/* 8010ED0C 0010AC2C  3B DE 00 01 */	addi r30, r30, 1
lbl_8010ED10:
/* 8010ED10 0010AC30  7C 1E E0 40 */	cmplw r30, r28
/* 8010ED14 0010AC34  41 80 FF AC */	blt lbl_8010ECC0
/* 8010ED18 0010AC38  4B FF F8 D9 */	bl AmcEXIDeselect
/* 8010ED1C 0010AC3C  38 60 00 00 */	li r3, 0
/* 8010ED20 0010AC40  48 00 00 0C */	b lbl_8010ED2C
lbl_8010ED24:
/* 8010ED24 0010AC44  38 60 00 05 */	li r3, 5
/* 8010ED28 0010AC48  4B FF F8 49 */	bl AmcEXISelect
lbl_8010ED2C:
/* 8010ED2C 0010AC4C  2C 03 00 00 */	cmpwi r3, 0
/* 8010ED30 0010AC50  41 82 FF F4 */	beq lbl_8010ED24
/* 8010ED34 0010AC54  40 82 00 0C */	bne lbl_8010ED40
/* 8010ED38 0010AC58  38 60 00 01 */	li r3, 1
/* 8010ED3C 0010AC5C  48 00 00 68 */	b lbl_8010EDA4
lbl_8010ED40:
/* 8010ED40 0010AC60  3C 00 00 01 */	lis r0, 1
/* 8010ED44 0010AC64  90 01 00 10 */	stw r0, 0x10(r1)
/* 8010ED48 0010AC68  38 61 00 10 */	addi r3, r1, 0x10
/* 8010ED4C 0010AC6C  38 80 00 02 */	li r4, 2
/* 8010ED50 0010AC70  38 A0 00 01 */	li r5, 1
/* 8010ED54 0010AC74  38 C0 00 00 */	li r6, 0
/* 8010ED58 0010AC78  4B FF F3 91 */	bl AmcEXIImm
/* 8010ED5C 0010AC7C  4B FF F5 D1 */	bl AmcEXISync
/* 8010ED60 0010AC80  38 61 00 24 */	addi r3, r1, 0x24
/* 8010ED64 0010AC84  38 80 00 02 */	li r4, 2
/* 8010ED68 0010AC88  38 A0 00 00 */	li r5, 0
/* 8010ED6C 0010AC8C  38 C0 00 00 */	li r6, 0
/* 8010ED70 0010AC90  4B FF F3 79 */	bl AmcEXIImm
/* 8010ED74 0010AC94  4B FF F5 B9 */	bl AmcEXISync
lbl_8010ED78:
/* 8010ED78 0010AC98  38 61 00 24 */	addi r3, r1, 0x24
/* 8010ED7C 0010AC9C  38 80 00 02 */	li r4, 2
/* 8010ED80 0010ACA0  38 A0 00 00 */	li r5, 0
/* 8010ED84 0010ACA4  38 C0 00 00 */	li r6, 0
/* 8010ED88 0010ACA8  4B FF F3 61 */	bl AmcEXIImm
/* 8010ED8C 0010ACAC  4B FF F5 A1 */	bl AmcEXISync
/* 8010ED90 0010ACB0  80 01 00 24 */	lwz r0, 0x24(r1)
/* 8010ED94 0010ACB4  54 00 87 FF */	rlwinm. r0, r0, 0x10, 0x1f, 0x1f
/* 8010ED98 0010ACB8  41 82 FF E0 */	beq lbl_8010ED78
/* 8010ED9C 0010ACBC  4B FF F8 55 */	bl AmcEXIDeselect
/* 8010EDA0 0010ACC0  38 60 00 00 */	li r3, 0
lbl_8010EDA4:
/* 8010EDA4 0010ACC4  80 01 00 44 */	lwz r0, 0x44(r1)
/* 8010EDA8 0010ACC8  83 E1 00 3C */	lwz r31, 0x3c(r1)
/* 8010EDAC 0010ACCC  83 C1 00 38 */	lwz r30, 0x38(r1)
/* 8010EDB0 0010ACD0  7C 08 03 A6 */	mtlr r0
/* 8010EDB4 0010ACD4  83 A1 00 34 */	lwz r29, 0x34(r1)
/* 8010EDB8 0010ACD8  83 81 00 30 */	lwz r28, 0x30(r1)
/* 8010EDBC 0010ACDC  38 21 00 40 */	addi r1, r1, 0x40
/* 8010EDC0 0010ACE0  4E 80 00 20 */	blr

.global EXI2_Reserve
EXI2_Reserve:
/* 8010EDC4 0010ACE4  4E 80 00 20 */	blr

.global EXI2_Unreserve
EXI2_Unreserve:
/* 8010EDC8 0010ACE8  4E 80 00 20 */	blr

.section .sdata

.global pucEXI2InputPending
pucEXI2InputPending:
	# ROM: 0x1EC210
	.4byte lbl_802F27D0  ;# ptr
	.4byte 0

.section .data

.global lbl_801ED8F8
lbl_801ED8F8:
	# ROM: 0x1EA8F8
glabel string_Can_t_select_EXI2_port__n
	.asciz "Can't select EXI2 port!\n"

.section .sbss

    .balign 8
.global lbl_802F27D0
lbl_802F27D0:
    .skip 0x4
.global fExi2Selected
fExi2Selected:
	.skip 0x4
.global TRK_Callback
TRK_Callback:
	.skip 0x8
